<div class="row">
    <div class="col-xl-12">
        <div id="panel-1" class="panel">
            <div class="panel-hdr">
                <h2>
                    <span class="fw-300"><strong>Ver</strong> <i>Ingresos</i></span>
                </h2>
                <div class="panel-toolbar">
                    <button class="btn btn-panel" data-action="panel-collapse" data-toggle="tooltip" data-offset="0,10"
                        data-originalbmnvxzcbhmgchdghjitle="Collapse"></button>
                    <button class="btn btn-panel" data-action="panel-fullscreen" data-toggle="tooltip"
                        data-offset="0,10" data-original-title="Fullscreen"></button>
                    <button class="btn btn-panel" data-action="panel-close" data-toggle="tooltip" data-offset="0,10"
                        data-original-title="Close"></button>
                </div>
            </div>
            <div class="panel-container show">
                <div class="panel-content">
                    <div class="row text-center ">
                        <div class="col-12">
                            <h3 class="display-4">Ver Cheques </h3>
                        </div>
                    </div>

                    <!-- Formulario  -->
                    <form class="form-group" method="post" action="/addEgreso">
                        <div class="container">
                            <label class="form-label col-12" for="simpleinput">
                                <h3 class="text-center">Ingresos</h3>
                            </label><br /><br />

                            <div class="row mb-6">
                                <div class="col-6">
                                    <span>Empresa</span><br>
                                    <input type="text" id="b1" class="form-control" placeholder="Buscar empresa ">
                                    <select name="cheque_empresa_id" id="s1" class="form-control" >
                                        <option value="" selected disabled hidden>Seleccione una opción</option>
                                        {{#each empresas}}
                                            <option value="{{empresa_id}}" {{#if (is ../e.cheque_empresa_id empresa_id)}}selected{{/if}}>{{empresa_razon_social}}</option>
                                        {{/each}}
                                    </select><br />
                                </div>
                                <div class="col-6">
                                    <span>Cuenta de Banco</span>
                                    <input type="text" id="b2" class="form-control" placeholder="Buscar cuenta de banco">
                                    <select name="cheque_cuenta_id" id="s2" class="form-control">
                                        <option value="" selected disabled hidden>Seleccione una opción</option>
                                        {{#each cuentas}}
                                            <option value="{{id}}" {{#if (is ../e.cheque_cuenta_id id)}} selected {{/if}}>{{cuenta}}</option>
                                        {{/each}}
                                    </select><br />
                                </div>
                            </div>


                            <div class="row mb-6">
                                <div class="col-6">
                                    <span>Tipo de Cambio</span>
                                    <input type="text" class="form-control" name="TipoCambio" value="{{e.TipoCambio}}"> <br>
                                </div>
                                <div class="col-6">
                                    <span>Proveedor</span>
                                    <input type="text" id="b3" class="form-control" placeholder="Buscar proveedor">
                                    <select name="cheque_proveedor_id" id="s3" class="form-control">
                                        <option value="" selected disabled hidden>Seleccione una opción</option>
                                        {{#each proveedores}}
                                            <option value="{{proveedor_id}}" {{#if (is ../e.cheque_proveedor_id)}} selected {{/if}} >{{proveedor_razon_social}}</option>
                                        {{/each}}
                                    </select><br />
                                </div>
                            </div>

                            <div class="row mb-6">
                                <div class="col-6">
                                    <span>Monto del Cheque</span>
                                    <input type="text" class="form-control" name="cheque_monto" id="total" onkeyup="calcular()" value="{{e.cheque_monto}}"> <br>
                                </div>
                                <div class="col-6">
                                    <span>Cuenta Contable Banco</span>
                                    <input type="text" id="b4" class="form-control" placeholder="Buscar cuenta contable de banco">
                                    <select name="cuenta_contable" id="s4" class="form-control">
                                        <option value="" selected disabled hidden>Seleccione una opción</option>
                                        {{#each cuentas}}
                                            <option value="{{id}}" {{#if (is ../e.cuenta_contable id)}} selected {{/if}}>{{cuenta}}</option>
                                        {{/each}}
                                    </select><br />
                                </div>
                            </div>

                            <div class="row mb-6">
                                <div class="col-6">
                                    <span>Subtotal</span>
                                    <input type="text" class="form-control" name="cheque_subtotal" id="subtotal"> <br>
                                </div>
                                <div class="col-6">
                                    <span>Cuenta Contable Venta</span>
                                    <input type="text" id="b5" class="form-control" placeholder="Buscar cuenta contable venta">
                                    <select name="cuenta_contable2" id="s5" class="form-control">
                                        <option value="" selected disabled hidden>Seleccione una opción</option>
                                        {{#each cuentas}}
                                            <option value="{{id}}" {{#if (is ../e.cuenta_contable2)}} selected {{/if}}>{{cuenta}}</option>
                                        {{/each}}
                                    </select><br />
                                </div>
                            </div>

                            <div class="row mb-6">
                                <div class="col-6">
                                    <span>IVA</span>
                                    <input type="text" class="form-control" name="cheque_iva" id="iva"> <br>
                                </div>
                                <div class="col-6">
                                    <span>Cuenta Contable Impuesto</span>
                                    <input type="text" id="b6" class="form-control" placeholder="Buscar cuenta contable impuesto">
                                    <select name="cuenta_contable3" id="s6" class="form-control">
                                        <option value="" selected disabled hidden>Seleccione una opción</option>
                                        {{#each cuentas}}
                                            <option value="{{id}}">{{cuenta}} {{#if (is ../e.cuenta_contable3)}} selected {{/if}}</option>
                                        {{/each}}
                                    </select><br />
                                </div>
                            </div>

                            <div class="row mb-6">
                                <div class="col-6">
                                    <span>Retención IVA</span>
                                    <input type="text" class="form-control" name="cheque_retencion" value="{{e.cheque_retencion}}"> <br>
                                </div>
                                <div class="col-6">
                                    <span>Retención ISR</span>
                                    <input type="text" class="form-control" name="retencion_isr" value="{{e.retencion_isr}}"> <br>
                                </div>
                                <div class="col-6">
                                    <span>Folio</span>
                                    <input type="text" class="form-control" name="cheque_folio" value="{{e.cheque_folio}}"> <br>
                                </div>
                                <div class="col-md-6 col-sm-6 col-lg-6 mb-3 text-center">
                                <label for="" class="font-weight-bold">Proyecto / Razón Social</label><br>
                                <a class="btn btn-info disabled" data-toggle="collapse" href="#multiCollapseExample1"
                                    role="button" aria-expanded="false" aria-controls="multiCollapseExample1">Desplegar
                                    Tabla</a>
                            </div>
                            </div>
 
                            

                            <div class="col-md-12 col-sm-12 col-lg-12 mb-3">
                                <div class="collapse multi-collapse" id="multiCollapseExample1">
                                    <div class="card card-body">
                                        <label for="" class="font-weight-bold">Cotizacion /
                                            Proyecto</label><br>
                                        <!-- datatable start -->
                                        <table id="cotizaciones"
                                            class="table table-bordered table-hover table-striped w-100">
                                            <thead class="bg-primary-600">
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Proyecto</th>
                                                    <th>Descripcion</th>
                                                    <th>Cliente</th>
                                                    <th>Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                            </tbody>
                                        </table>
                                        <!-- datatable end -->
                                    </div>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-4">
                                    <label>Inversión</label>
                                    <input type="text" id="b7" class="form-control" placeholder="Buscar inversion">
                                    <select class="form-control d-inline " id="s7" 
                                        name="cheque_inversion_id">
                                        
                                        <option value="" selected disabled hidden>Seleccione una opción</option>
                                        {{#each inversion}}
                                            <option value="{{inversion_id}}" {{#if (is ../e.cheque_inversion_id inversion_id)}} selected {{/if}}>{{Inversion_descripcion}}</option>
                                        {{/each}}

                                    </select>
                                </div>
                                <div class="col-4">
                                    <label>Centro de Costos</label>
                                    <input type="text" id="b8" class="form-control" placeholder="Buscar centro de costos">
                                    <select class="form-control d-inline " 
                                        name="cheque_centrodecostos_id">
                                        <option value="" selected disabled hidden>Seleccione una opción</option>
                                        {{#each centroCostos}}
                                            <option value="{{id}}" {{#if (is ../e.cheque_centrodecostos_id id)}} selected {{/if}}>{{nombre}}</option>
                                        {{/each}}
                                    </select>
                                </div>
                                <div class="col-4">
                                    <span for="example-date">Sucursal</span>
                                    <input type="text" id="b9" class="form-control" placeholder="Buscar sucursal">
                                    <select class="form-control d-inline " id="s9" name="sucursal_id">
                                        <option value="" selected disabled hidden>Seleccione una opción</option>
                                        {{#each sucursal}}
                                            <option value="{{id}}" {{#if (is ../e.sucursal_id id)}} selected {{/if}}>{{nombre}}</option>
                                        {{/each}}
                                    </select>

                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-4">
                                    <label>Fecha de egreso</label>
                                    <input type="date" class="form-control" name="cheque_fecha_alta" value="{{e.cheque_fecha_alta}}"> <br>
                                </div>
                                <div class="col-4">
                                    <label>Tipo de erogacion/Presupuesto</label>
                                    <input type="text" id="b10" class="form-control" placeholder="Buscar tipo de erogacion / presupuesto">
                                    <select class="form-control d-inline " id="s10" 
                                        name="cheque_erogacion_id">
                                        <option value="" selected disabled hidden>Seleccione una opción</option>
                                        {{#each erogacion}}
                                            <option value="{{id}}" {{#if (is ../e.cheque_erogacion_id id)}} selected {{/if}}>{{descripcion}}</option>
                                        {{/each}}
                                    </select>
                                </div>
                                <div class="col-4">
                                    <span for="example-date">Concepto de obra</span>
                                    <input type="text" id="b11" class="form-control" placeholder="Buscar concepto de obra">
                                    <select class="form-control d-inline " id="s11" name="erogacion_obra_id">
                                        <option value="" selected disabled hidden>Seleccione una opción</option>
                                        {{#each obras}}
                                            <option value="{{id}}" {{#if (is ../e.erogacion_obra_id id)}} selected {{/if}}>{{descripcion}}</option>
                                        {{/each}}
                                    </select>

                                </div>
                            </div>
                            

                            <div class="row mb-6">
                                <div class="col-6">
                                    <label>Numero de Documento</label>
                                    <input type="text" class="form-control" name="cheque_documento" value="{{e.cheque_documento}}"> <br>
                                </div>
                                <div class="col-6">
                                    <label>Fecha de transferencia</label>
                                    <input type="date" class="form-control" name="FechaTransferencia" value="{{e.FechaTransferencia}}">

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 col-sm-6 col-lg-6 mb-3">
                                    <label for="" class="font-weight-bold">Metodo de pago</label><br>
                                    <input type="text" id="buscarMetodoPago" class="form-control" placeholder="Buscar Forma de Pago">
                                    <select required name="mpago" id="selectMetodoPago" class="form-control">
                                        <option selected disabled value="">Seleccionar</option>
                                        <option value="PPD" {{#if (is ../e.mpago 'PPD')}} selected {{/if}}>Pago en parcialidades o diferido</option>
                                        <option value="PUE" {{#if (is ../e.mpago 'PUE')}} selected {{/if}}>Pago en una sola exhibición</option>
                                    </select>
                                </div>


                            <div class="col-md-6 col-sm-6 col-lg-6 mb-3">
                                    <label>Comentarios</label>
                            <textarea class="form-control" name="cheque_comentario" rows="3" cols="45" style="resize: none; " disabled value="{{e.cheque_comentario}}"></textarea><br>

                                </div>
                            </div>

                            
                            <div class="row mb-6 mt-1">
                                <div class="col-6">
                                    <span>Numero de factura</span>
                                    <input type="text" class="form-control" name="NumFactura" value="{{e.NumFactura}}"> <br>
                                </div>
                                <div class="col-6">
                                    <span>UUID</span>
                                    <input type="text" class="form-control" name="UUID" value="{{e.UUID}}"> <br>
                                </div>
                            </div>

                            <br><br>
                            
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
</div>
{{#section 'scripts'}}
<script>
 
function calcular(){
    var total = document.getElementById('total').value;

    //calcular el 16% de la cotizacion
    var iva = total * 0.16;
    document.getElementById('iva').value = iva.toFixed(2);

    //calcular el subtotal
    var subtotal = total - iva;
    document.getElementById('subtotal').value = subtotal.toFixed(2);

    
  }


    document.addEventListener("DOMContentLoaded", function() {
  // Seleccionar todos los inputs y selects
  var inputs = document.querySelectorAll("input, select");
  
  // Iterar sobre cada elemento y deshabilitarlo
  for (var i = 0; i < inputs.length; i++) {
    inputs[i].disabled = true;
  }
    calcular()
});
</script>
{{/section}}