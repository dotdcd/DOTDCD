{{#section 'head'}}

<style>
    body {
        margin-top: 20px;
        background: #eee;
    }

    .invoice {
        background: #fff;
        padding: 20px
    }

    .invoice-company {
        font-size: 20px
    }

    .invoice-header {
        margin: 0 -20px;
        padding: 20px
    }

    .invoice-date,
    .invoice-from,
    .invoice-to {
        display: table-cell;
        width: 1%
    }

    .invoice-from,
    .invoice-to {
        padding-right: 20px
    }

    .invoice-date .date,
    .invoice-from strong,
    .invoice-to strong {
        font-size: 16px;
        font-weight: 600
    }

    .invoice-date {
        text-align: left;
        padding-left: 20px
    }

    .invoice-price {
        background: #f0f3f4;
        display: table;
        width: 100%
    }

    .invoice-price .invoice-price-left,
    .invoice-price .invoice-price-right {
        display: table-cell;
        padding: 20px;
        font-size: 20px;
        font-weight: 600;
        width: 75%;
        position: relative;
        vertical-align: middle
    }

    .invoice-price .invoice-price-left .sub-price {
        display: table-cell;
        vertical-align: middle;
        padding: 0 20px
    }

    .invoice-price small {
        font-size: 12px;
        font-weight: 400;
        display: block
    }

    .invoice-price .invoice-price-row {
        display: table;
        float: left
    }

    .invoice-price .invoice-price-right {
        width: 25%;
        background: #2d353c;
        color: #fff;
        font-size: 28px;
        text-align: right;
        vertical-align: bottom;
        font-weight: 300
    }

    .invoice-price .invoice-price-right small {
        display: block;
        opacity: .6;
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 12px
    }

    .invoice-footer {
        border-top: 1px solid #ddd;
        padding-top: 10px;
        font-size: 10px
    }

    .invoice-note {
        color: #999;
        margin-top: 30px;
        font-size: 85%
    }

    .invoice>div:not(.invoice-footer) {
        margin-bottom: 20px
    }

    .btn.btn-white,
    .btn.btn-white.disabled,
    .btn.btn-white.disabled:focus,
    .btn.btn-white.disabled:hover,
    .btn.btn-white[disabled],
    .btn.btn-white[disabled]:focus,
    .btn.btn-white[disabled]:hover {
        color: #2d353c;
        background: #fff;
        border-color: #d9dfe3;
    }

    .data{
        font-size: 9px;
    }
</style>
{{/section}}

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
<div class="container" id="container">
    <div class="col-md-12">
        <div class="invoice">
            <!-- begin invoice-company -->
            <div class="invoice-company text-inverse f-w-600">
                <span class="pull-right hidden-print">
                    <img style="height: 55px; width: 55px" src="https://dotdcd.com/img/icon_datos.png" alt="">
                    <img style="height: 55px; width: 55px" src="https://www.dotdcd.com/img/icon_redes.png" alt="">
                    <img style="height: 55px; width: 55px" src="https://www.dotdcd.com/img/icon_deteccion.png" alt="">
                    <img style="height: 55px; width: 55px" src="https://dotdcd.com/img/icon_cctv.png" alt="">
                    <img style="height: 55px; width: 55px" src="https://dotdcd.com/img/icon_acceso.png" alt="">
                </span>
                <img style="height: 55px; width: 160px" src="/img/logo-dot.png" alt="">
            </div>
            <hr style="color: #0000 !important; background-color: #0000;"/>
            <!-- end invoice-company -->
            <!-- begin invoice-header -->
            <div class="invoice-header">
                <div class="invoice-from">
                    <address class="m-t-5 m-b-5">
                        <strong>Cliente:</strong> {{cliente.cliente_razon_social}} <br>
                        <strong>RFC:</strong> {{cliente_rfc}} <br>
                        <strong>Domicilio:</strong> {{cliente.cliente_calle}} No. {{cliente.cliente_numero}}, {{cliente.cliente_colonia}}, {{cliente.cliente_codigo_postal}} {{cliente.cliente_municipio}}, {{cliente.cliente_estado}} <br>
                        <strong>Fecha y Hora de Emisión:</strong> {{taxInfo.factura_fecha_alta}} <br>
                        <strong>Lugar de Expedición:</strong> 64750 <br>

                    </address>
                </div>
                <div class="invoice-to">
                </div>
                <div class="invoice-from">
                    <address class="m-t-5 m-b-5">
                        <strong>Forma de Pago</strong> <br>
                        {{formaPago.id}} - {{formaPago.descripcion}} <br>
                        <strong>Método de Pago</strong> <br>
                        {{#if (is taxInfo.mpago 'PPD')}} PPD - Pago en parcialidades o diferido {{else}} PUE - Pago en una sola exhibición {{/if}}<br>
                        <strong>TIPO DE COMPROBANTE: I - Ingreso</strong> <br>
                        <strong>SERIE-FOLIO: {{taxInfo.factura_factura}} </strong><br>
                        Fecha y Hora de Certificación <br>
                        <strong>{{taxInfo.factura_fecha_alta}}</strong> <br>
                        REGIMEN FISCAL: 601 - General de Ley Personas Morales <br>
                    </address>
                </div>
            </div>
            <!-- end invoice-header -->
            <!-- begin invoice-content -->
            <div class="invoice-content">
                <!-- begin table-responsive -->
                <div class="table-responsive">
                    <table class="table table-invoice">
                        <thead>
                            <tr>
                                <th>CANT</th>
                                <th>DESCRIPCIÓN</th>
                                <th class="text-center" width="10%">PRECIO</th>
                                <th class="text-center" width="10%">IMPDESC</th>
                                <th class="text-center" width="20%">IMPORTE</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    1.00
                                </td>
                                <td >{{taxInfo.descripcion}}</td>
                                <td class="text-center">${{{ money taxInfo.factura_subtotal }}}</td>
                                <td class="text-center">$0.00</td>
                                <td class="text-center">${{{ money taxInfo.factura_subtotal }}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- end table-responsive -->
                <div class="">
                    <div class="invoice-price-left">
                        <small>( {{{ntp taxInfo.factura_total}}} 00/100 M.N.)</small><br>
                        <small>Moneda: MXN - Peso Mexicano</small><br>
                        <small>Tipo de cambio: 1.0000</small><br>
                    </div>

                </div> <br>
                <!-- begin invoice-price -->
                <div class="invoice-price">
                    <div class="invoice-price-left">
                        <div class="invoice-price-row">
                            <div class="sub-price">
                                <small>SUBTOTAL</small>
                                <span class="text-inverse">${{{money taxInfo.factura_subtotal}}}</span>
                            </div>
                            <div class="sub-price">
                                <i class="fa fa-plus text-muted"></i>
                            </div>
                            <div class="sub-price">
                                <small>I.V.A</small>
                                <span class="text-inverse">${{{money taxInfo.prefactura_iva}}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="invoice-price-right">
                        <small>TOTAL</small> <span class="f-w-600">${{{money taxInfo.factura_total}}}</span>
                    </div>
                </div>
                <!-- end invoice-price -->
            </div>
            <!-- end invoice-content -->
            <!-- begin invoice-note -->
            <div class="invoice-note">
                TIPO DE RELACION: - <br>
                CFDI RELACIONADO: <br>
                ESTE DOCUMENTO ES UNA REPRESENTACION IMPRESA DE UN CFDI <br>
                EFECTOS FISCALES AL PAGO <br>
            </div>
            <!-- end invoice-note -->

            <div class="invoice-header">
                <div class="invoice-from data">


                </div>
                <div class="invoice-to">
                    <div class="invoice-date">
                        <div>
                            <address class="m-t-5 m-b-5">
                                <div>
                                    <strong style="visibility: hidden;">Cliente:</strong> <br>
                                    <img style="width: 250px; padding-top: 10px;" src="data:image/png;base64, {{taxInfo.qr}}" alt="">
                                </div>
                            </address>
                        </div>
                    </div>
                </div>
                <div class="invoice-date">
                    <div style="width: 500px;">
                        <address class="m-t-5 m-b-5">
                            <div style="background-color: grey !important; width: 550px"><strong class="text-inverse" style="font-size: 11px; color: #ffff; padding-left: 5px;">Sello digital CFDI</strong></div>
                            <div style="overflow-wrap: break-word;"><p class="data">{{taxInfo.sello_cfdi}}</p></div>
                            <br>
                            <div style="background-color: grey !important; width: 550px"><strong class="text-inverse" style="font-size: 11px; color: #ffff; padding-left: 5px;">Sello del SAT</strong></div>
                            <p class="data" style="overflow-wrap: break-word;">{{taxInfo.sello_sat}}</p>
                            <br>
                            <div style="background-color: grey !important; width: 550px"><strong class="text-inverse" style="font-size: 11px; color: #ffff; padding-left: 5px;">Cadena original del complemento de certificación digital del SAT</strong></div>
                            <p class="data" style="overflow-wrap: break-word;">{{taxInfo.cadena_sat}}
                            </p>
                        </address>
                    </div>
                </div>
            </div>
            <!-- begin invoice-footer -->
            <div class="invoice-footer">
                <p class="text-center m-b-5 f-w-600">
                    DOT DCD
                </p>
                <p class="text-center">
                    <span class="m-r-10"><i class="fa fa-fw fa-lg fa-globe"></i> PASEO DE LA ESPERANZA No. 1204, Valle
                        del Mirador, Monterrey, Nuevo León, México. 64750 |</span>
                    <span class="m-r-10"><i class="fa fa-file-text"></i> RFC DDC041020CT0</span>
                </p>
            </div>
            <!-- end invoice-footer -->
        </div>
    </div>
</div>

<div class="row text-center">
    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3"></div>
    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
        <button class="btn btn-outline-success btn-lg" id="btnCrearPdf" onclick="printPdf()"> <i class="fal fa-file-download fa-2x"></i></button>
        
        <a href="/dashboard/"><button class="btn btn-outline-info btn-lg"><i class="fal fa-arrow-to-left fa-2x"></i></button></a>
    </div>
    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3"></div>
</div>

{{#section 'scripts'}}
<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.6.11/dist/sweetalert2.all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"
    integrity="sha512-YcsIPGdhPK4P/uRW6/sruonlYj+Q7UHWeKfTAkBW+g83NKM+jMJFJ4iAPfSnVp7BKD4dKMHmVSvICUbE/V1sSw=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    function printPdf() {
        var element = document.getElementById('container');
        html2pdf()
            .set({
                margin: 1,
                filename: 'documento.pdf',
                image: {
                    type: 'jpeg',
                    quality: 0.98
                },
                html2canvas: {
                    scale: 3, // A mayor escala, mejores gráficos, pero más peso
                    letterRendering: true,
                },
                jsPDF: {
                    unit: "in",
                    format: "a3",
                    orientation: 'portrait' // landscape o portrait
                }
            })
            .from(element)
            .save()
            .catch(err => console.log(err));
    }
</script>

{{/section}}